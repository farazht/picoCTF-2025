## WebSockFish

In this challenge, we're given a webpage with a chess board on it, where we're expected to play against Stockfish (a very powerful chess engine). Clearly, beating the bot is impossible, so we need to find a way to convince the bot it has lost.

The webpage uses a WebSocket to communicate with Stockfish. The engine is used to calculate the best move for the bot, and the bot plays that move on the board.

Taking a look at this part of the code, we can see that the bot sends a message to the WebSocket with the evaluation of the current position. In return, it receives the best move to play.

```js
if (event.data.startsWith("bestmove")) {
    var bestMove = event.data.split(" ")[1];
    var srcSq = bestMove.slice(0, 2);
    var dstSq = bestMove.slice(2, 4);
    var promotion = bestMove.slice(4);

    game.move({ from: srcSq, to: dstSq, promotion: promotion });
    board.position(game.fen());
} else if (event.data.startsWith(`info depth ${DEPTH}`)) {
    var splitString = event.data.split(" ");
    if (event.data.includes("mate")) {
    message = "mate " + parseInt(splitString[9]);
    } else {
    message = "eval " + parseInt(splitString[9]);
    }
    sendMessage(message);
}
```

By simply putting the following into the browser console, we can make the bot think it's in a losing position and make it resign:

```js
sendMessage("eval -1000000000");
```

The bot will then respond with the following message:

```
Huh???? How can I be losing this badly... I resign... here's your flag: picoCTF{c1i3nt_s1d3_w3b_s0ck3t5_dc1dbff7}
```